---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { articles, getArticleSlugs } from '../../data/articles';
import { authors, getAllAuthors, getAuthor } from '../../data/authors';

// Get URL params for filtering
const url = Astro.url;
const authorFilter = url.searchParams.get('author');
const searchQuery = url.searchParams.get('q')?.toLowerCase();
const page = parseInt(url.searchParams.get('page') || '1');
const ARTICLES_PER_PAGE = 12;

// Get all articles as array with proper author lookup
const allArticles = Object.entries(articles).map(([slug, article]) => ({
  ...article,
  slug,
  authorData: getAuthor(article.author) // Fixed: use getAuthor not getAuthorByName
}));

// Apply filters
let filteredArticles = allArticles;

if (authorFilter) {
  filteredArticles = filteredArticles.filter(a => a.author === authorFilter);
}

if (searchQuery) {
  filteredArticles = filteredArticles.filter(a =>
    a.title.toLowerCase().includes(searchQuery) ||
    a.excerpt?.toLowerCase().includes(searchQuery) ||
    a.category?.toLowerCase().includes(searchQuery)
  );
}

// Pagination
const totalArticles = filteredArticles.length;
const totalPages = Math.ceil(totalArticles / ARTICLES_PER_PAGE);
const startIndex = (page - 1) * ARTICLES_PER_PAGE;
const paginatedArticles = filteredArticles.slice(startIndex, startIndex + ARTICLES_PER_PAGE);

// Authors for filter with article counts
const blogAuthors = getAllAuthors().map(author => ({
  ...author,
  articleCount: allArticles.filter(a => a.author === author.slug).length
}));

// Get some article counts by year for "Recent" vs "Archive"
const currentYear = new Date().getFullYear();
const recentArticles = allArticles.filter(a => {
  const year = new Date(a.dateISO || a.date).getFullYear();
  return year >= currentYear - 1;
});

// Popular/Featured topics based on what people actually search for
const popularTopics = [
  { name: "FERS Supplement", query: "fers supplement" },
  { name: "TSP Withdrawal", query: "tsp withdrawal" },
  { name: "G Fund Rate", query: "g fund rate" },
  { name: "Medicare & FEHB", query: "medicare fehb" },
  { name: "COLA Updates", query: "cola" },
  { name: "Pay Raise", query: "pay raise" },
  { name: "Retirement Calculator", query: "calculator" },
  { name: "Social Security", query: "social security" },
];

// Build filter description
let filterDescription = '';
if (authorFilter) {
  const authorName = getAuthor(authorFilter)?.name || authorFilter;
  filterDescription = `Articles by ${authorName}`;
}
if (searchQuery) {
  filterDescription = `Search results for "${searchQuery}"`;
}
---

<BaseLayout
  title={filterDescription ? `${filterDescription} | PlanWell Blog` : "The PlanWell Blog - Federal Retirement Insights"}
  description="Expert articles on FERS pension, TSP investing, FEHB health insurance, Medicare coordination, and tax strategies for federal employees."
>
  <!-- Hero Section with Search -->
  <section class="blog-hero">
    <div class="container">
      <h1 class="blog-hero__title">Federal Retirement Resources</h1>
      <p class="blog-hero__subtitle">
        {totalArticles.toLocaleString()} articles from certified federal benefits specialists
      </p>

      <!-- Search Bar -->
      <form class="search-form" action="/blog" method="get">
        <div class="search-input-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input
            type="search"
            name="q"
            placeholder="Search articles... (e.g., 'FERS supplement', 'TSP withdrawal', 'Medicare')"
            value={searchQuery || ''}
            class="search-input"
          />
          <button type="submit" class="search-btn">Search</button>
        </div>
      </form>

      <!-- Quick Topic Links -->
      <div class="quick-topics">
        {popularTopics.map(topic => (
          <a href={`/blog?q=${encodeURIComponent(topic.query)}`} class="quick-topic">
            {topic.name}
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Author Filter Bar -->
  <section class="author-filter-section">
    <div class="container">
      <div class="author-filter">
        <span class="author-filter__label">Filter by Author:</span>
        <div class="author-filter__options">
          <a
            href="/blog"
            class={`author-chip ${!authorFilter ? 'author-chip--active' : ''}`}
          >
            All Authors
          </a>
          {blogAuthors.map(author => (
            <a
              href={`/blog?author=${author.slug}`}
              class={`author-chip ${authorFilter === author.slug ? 'author-chip--active' : ''}`}
            >
              <img src={author.image} alt={author.name} class="author-chip__image" />
              <span class="author-chip__name">{author.name.split(' ')[0]}</span>
              <span class="author-chip__count">({author.articleCount})</span>
            </a>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Filter Status -->
  {filterDescription && (
    <section class="filter-status">
      <div class="container">
        <div class="filter-status__content">
          <span class="filter-status__text">{filterDescription}</span>
          <span class="filter-status__count">({filteredArticles.length} articles)</span>
          <a href="/blog" class="filter-status__clear">Clear filters</a>
        </div>
      </div>
    </section>
  )}

  <!-- Main Content -->
  <section class="blog-main">
    <div class="container">
      <div class="blog-layout">
        <!-- Articles Column -->
        <main class="blog-content">
          {paginatedArticles.length === 0 ? (
            <div class="no-results">
              <h2>No articles found</h2>
              <p>Try adjusting your search or filters, or <a href="/blog">browse all articles</a>.</p>
            </div>
          ) : (
            <>
              <!-- Articles Grid -->
              <div class="posts-grid">
                {paginatedArticles.map((article, index) => (
                  <article class="post-card">
                    <a href={`/blog/${article.slug}`} class="post-card__image-link">
                      <img
                        src={article.image || '/images/blog/default-cover.jpg'}
                        alt={article.title}
                        class="post-card__image"
                        loading={index < 4 ? "eager" : "lazy"}
                        onerror="this.onerror=null; this.src='/images/blog/default-cover.jpg';"
                      />
                    </a>
                    <div class="post-card__content">
                      <div class="post-card__meta-top">
                        <span class="post-card__category">{article.category}</span>
                        <span class="post-card__date">{article.date}</span>
                      </div>
                      <h3 class="post-card__title">
                        <a href={`/blog/${article.slug}`}>{article.title}</a>
                      </h3>
                      <p class="post-card__excerpt">
                        {article.excerpt?.slice(0, 120) || article.content?.replace(/<[^>]*>/g, '').slice(0, 120)}...
                      </p>
                      <div class="post-card__author">
                        {article.authorData && (
                          <>
                            <img
                              src={article.authorData.image}
                              alt={article.authorData.name}
                              class="post-card__author-image"
                            />
                            <span class="post-card__author-name">
                              {article.authorData.name}
                            </span>
                            {article.authorData.credentials && (
                              <span class="post-card__author-creds">{article.authorData.credentials}</span>
                            )}
                          </>
                        )}
                      </div>
                    </div>
                  </article>
                ))}
              </div>

              <!-- Pagination -->
              {totalPages > 1 && (
                <nav class="pagination" aria-label="Article pagination">
                  <div class="pagination__info">
                    Showing {startIndex + 1}-{Math.min(startIndex + ARTICLES_PER_PAGE, totalArticles)} of {totalArticles} articles
                  </div>
                  <div class="pagination__controls">
                    {page > 1 && (
                      <a
                        href={`/blog?page=${page - 1}${authorFilter ? `&author=${authorFilter}` : ''}${searchQuery ? `&q=${searchQuery}` : ''}`}
                        class="pagination__btn"
                      >
                        ← Previous
                      </a>
                    )}

                    <div class="pagination__pages">
                      {Array.from({ length: Math.min(totalPages, 7) }, (_, i) => {
                        let pageNum;
                        if (totalPages <= 7) {
                          pageNum = i + 1;
                        } else if (page <= 4) {
                          pageNum = i + 1;
                        } else if (page >= totalPages - 3) {
                          pageNum = totalPages - 6 + i;
                        } else {
                          pageNum = page - 3 + i;
                        }
                        return (
                          <a
                            href={`/blog?page=${pageNum}${authorFilter ? `&author=${authorFilter}` : ''}${searchQuery ? `&q=${searchQuery}` : ''}`}
                            class={`pagination__page ${pageNum === page ? 'pagination__page--active' : ''}`}
                          >
                            {pageNum}
                          </a>
                        );
                      })}
                    </div>

                    {page < totalPages && (
                      <a
                        href={`/blog?page=${page + 1}${authorFilter ? `&author=${authorFilter}` : ''}${searchQuery ? `&q=${searchQuery}` : ''}`}
                        class="pagination__btn"
                      >
                        Next →
                      </a>
                    )}
                  </div>
                </nav>
              )}
            </>
          )}
        </main>

        <!-- Sidebar -->
        <aside class="blog-sidebar">
          <!-- Webinar CTA -->
          <div class="sidebar-cta">
            <div class="sidebar-cta__badge">Free Workshop</div>
            <h3 class="sidebar-cta__title">Master Your Federal Retirement</h3>
            <p class="sidebar-cta__text">
              Join 10,000+ federal employees who've attended our comprehensive FERS workshop. 3 hours of expert guidance, no sales pitch.
            </p>
            <ul class="sidebar-cta__benefits">
              <li>Maximize your FERS pension</li>
              <li>TSP withdrawal strategies</li>
              <li>FEHB & Medicare coordination</li>
              <li>Social Security optimization</li>
            </ul>
            <a href="/webinar" class="btn btn--gold btn--lg">Reserve My Free Seat</a>
            <p class="sidebar-cta__note">Next session: Live online</p>
          </div>

          <!-- Meet Our Team -->
          <div class="sidebar-section">
            <h3 class="sidebar-section__title">Our Federal Benefits Experts</h3>
            {blogAuthors.filter(a => a.credentials).map(author => (
              <a href={`/blog?author=${author.slug}`} class="author-card">
                <img
                  src={author.image}
                  alt={author.name}
                  class="author-card__image"
                />
                <div class="author-card__info">
                  <h4 class="author-card__name">{author.name}</h4>
                  <span class="author-card__credentials">{author.credentials}</span>
                  <span class="author-card__articles">{author.articleCount} articles</span>
                </div>
              </a>
            ))}
          </div>

          <!-- Recent Updates Note -->
          <div class="sidebar-section sidebar-section--light">
            <h3 class="sidebar-section__title">Stay Current</h3>
            <p class="sidebar-info-text">
              Federal benefits change frequently. We publish updates on TSP rates, COLA adjustments, pay raises, and policy changes as they happen.
            </p>
            <p class="sidebar-info-text">
              <strong>{recentArticles.length} articles</strong> published in the last 12 months.
            </p>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <!-- Bottom CTA -->
  <section class="bottom-cta">
    <div class="container">
      <div class="bottom-cta__content">
        <h2>Have Questions About Your Federal Benefits?</h2>
        <p>Our ChFEBC℠ certified planners specialize exclusively in federal employee benefits. Schedule a free consultation or attend our workshop.</p>
        <div class="bottom-cta__buttons">
          <a href="/webinar" class="btn btn--primary btn--lg">Free FERS Workshop</a>
          <a href="/contact" class="btn btn--outline btn--lg">Schedule Consultation</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Hero with Search */
  .blog-hero {
    background: linear-gradient(135deg, var(--color-navy) 0%, var(--color-navy-dark) 100%);
    color: var(--color-white);
    padding: var(--space-12) 0 var(--space-8);
    text-align: center;
  }

  .blog-hero__title {
    color: var(--color-white);
    font-size: var(--text-4xl);
    margin-bottom: var(--space-2);
  }

  .blog-hero__subtitle {
    color: var(--color-gray-300);
    font-size: var(--text-lg);
    margin-bottom: var(--space-8);
  }

  /* Search Form */
  .search-form {
    max-width: 700px;
    margin: 0 auto var(--space-6);
  }

  .search-input-wrapper {
    display: flex;
    align-items: center;
    background: var(--color-white);
    border-radius: var(--radius-lg);
    padding: var(--space-1);
    box-shadow: var(--shadow-lg);
  }

  .search-icon {
    margin-left: var(--space-4);
    color: var(--color-gray-400);
    flex-shrink: 0;
  }

  .search-input {
    flex: 1;
    border: none;
    padding: var(--space-4);
    font-size: var(--text-base);
    background: transparent;
    outline: none;
  }

  .search-input::placeholder {
    color: var(--color-gray-400);
  }

  .search-btn {
    background: var(--color-gold);
    color: var(--color-navy);
    border: none;
    padding: var(--space-3) var(--space-6);
    border-radius: var(--radius-md);
    font-weight: var(--font-semibold);
    cursor: pointer;
    transition: background var(--transition-fast);
  }

  .search-btn:hover {
    background: var(--color-gold-dark);
  }

  /* Quick Topics */
  .quick-topics {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-2);
  }

  .quick-topic {
    display: inline-block;
    padding: var(--space-2) var(--space-3);
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: var(--color-gray-200);
    transition: all var(--transition-fast);
  }

  .quick-topic:hover {
    background: rgba(255,255,255,0.2);
    color: var(--color-white);
  }

  /* Author Filter Section */
  .author-filter-section {
    background: var(--color-white);
    border-bottom: 1px solid var(--color-gray-200);
    padding: var(--space-4) 0;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .author-filter {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
  }

  .author-filter__label {
    font-weight: var(--font-medium);
    color: var(--color-gray-600);
    white-space: nowrap;
  }

  .author-filter__options {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
  }

  .author-chip {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: var(--color-gray-100);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: var(--color-gray-700);
    transition: all var(--transition-fast);
  }

  .author-chip:hover {
    background: var(--color-gray-200);
  }

  .author-chip--active {
    background: var(--color-navy);
    color: var(--color-white);
  }

  .author-chip__image {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    object-fit: cover;
  }

  .author-chip__count {
    color: var(--color-gray-400);
    font-size: var(--text-xs);
  }

  .author-chip--active .author-chip__count {
    color: var(--color-gray-300);
  }

  /* Filter Status */
  .filter-status {
    background: var(--color-gold-light);
    padding: var(--space-3) 0;
  }

  .filter-status__content {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  .filter-status__text {
    font-weight: var(--font-medium);
    color: var(--color-navy);
  }

  .filter-status__count {
    color: var(--color-gray-600);
  }

  .filter-status__clear {
    margin-left: auto;
    color: var(--color-navy);
    font-weight: var(--font-medium);
    text-decoration: underline;
  }

  /* Blog Layout */
  .blog-main {
    padding: var(--space-10) 0;
    background: var(--color-gray-50);
  }

  .blog-layout {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: var(--space-10);
  }

  /* Posts Grid */
  .posts-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-6);
  }

  .post-card {
    background: var(--color-white);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-base);
    display: flex;
    flex-direction: column;
  }

  .post-card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-4px);
  }

  .post-card__image-link {
    display: block;
    aspect-ratio: 16/10;
    overflow: hidden;
  }

  .post-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-base);
  }

  .post-card:hover .post-card__image {
    transform: scale(1.05);
  }

  .post-card__content {
    padding: var(--space-5);
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  .post-card__meta-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
  }

  .post-card__category {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-gold);
  }

  .post-card__date {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
  }

  .post-card__title {
    font-size: var(--text-lg);
    margin-bottom: var(--space-2);
    line-height: 1.3;
  }

  .post-card__title a {
    color: var(--color-navy);
    transition: color var(--transition-fast);
  }

  .post-card__title a:hover {
    color: var(--color-gold);
  }

  .post-card__excerpt {
    font-size: var(--text-sm);
    color: var(--color-gray-600);
    line-height: 1.6;
    margin-bottom: var(--space-4);
    flex: 1;
  }

  .post-card__author {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding-top: var(--space-3);
    border-top: 1px solid var(--color-gray-100);
    margin-top: auto;
  }

  .post-card__author-image {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
  }

  .post-card__author-name {
    font-weight: var(--font-medium);
    color: var(--color-navy);
    font-size: var(--text-sm);
  }

  .post-card__author-creds {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
  }

  /* No Results */
  .no-results {
    text-align: center;
    padding: var(--space-16) var(--space-8);
    background: var(--color-white);
    border-radius: var(--radius-lg);
  }

  .no-results h2 {
    margin-bottom: var(--space-4);
  }

  .no-results a {
    color: var(--color-gold);
    font-weight: var(--font-medium);
  }

  /* Pagination */
  .pagination {
    margin-top: var(--space-10);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
  }

  .pagination__info {
    font-size: var(--text-sm);
    color: var(--color-gray-500);
  }

  .pagination__controls {
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }

  .pagination__btn {
    padding: var(--space-2) var(--space-4);
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    color: var(--color-navy);
    transition: all var(--transition-fast);
  }

  .pagination__btn:hover {
    background: var(--color-navy);
    border-color: var(--color-navy);
    color: var(--color-white);
  }

  .pagination__pages {
    display: flex;
    gap: var(--space-1);
  }

  .pagination__page {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    color: var(--color-gray-700);
    transition: all var(--transition-fast);
  }

  .pagination__page:hover {
    border-color: var(--color-navy);
    color: var(--color-navy);
  }

  .pagination__page--active {
    background: var(--color-navy);
    border-color: var(--color-navy);
    color: var(--color-white);
  }

  /* Sidebar */
  .blog-sidebar {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }

  .sidebar-section {
    background: var(--color-white);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    box-shadow: var(--shadow-sm);
  }

  .sidebar-section--light {
    background: var(--color-gray-100);
  }

  .sidebar-section__title {
    font-size: var(--text-lg);
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-3);
    border-bottom: 2px solid var(--color-gray-100);
  }

  .sidebar-info-text {
    font-size: var(--text-sm);
    color: var(--color-gray-600);
    line-height: 1.6;
    margin-bottom: var(--space-3);
  }

  .sidebar-info-text:last-child {
    margin-bottom: 0;
  }

  /* Sidebar CTA */
  .sidebar-cta {
    background: linear-gradient(135deg, var(--color-navy) 0%, var(--color-navy-light) 100%);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    color: var(--color-white);
    text-align: center;
  }

  .sidebar-cta__badge {
    display: inline-block;
    background: var(--color-gold);
    color: var(--color-navy);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    margin-bottom: var(--space-4);
  }

  .sidebar-cta__title {
    color: var(--color-white);
    font-size: var(--text-xl);
    margin-bottom: var(--space-3);
  }

  .sidebar-cta__text {
    color: var(--color-gray-300);
    font-size: var(--text-sm);
    margin-bottom: var(--space-4);
    line-height: 1.6;
  }

  .sidebar-cta__benefits {
    list-style: none;
    text-align: left;
    margin-bottom: var(--space-5);
  }

  .sidebar-cta__benefits li {
    position: relative;
    padding-left: var(--space-5);
    margin-bottom: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-gray-200);
  }

  .sidebar-cta__benefits li::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--color-gold);
  }

  .sidebar-cta__note {
    font-size: var(--text-xs);
    color: var(--color-gray-400);
    margin-top: var(--space-3);
  }

  .btn--gold {
    background: var(--color-gold);
    color: var(--color-navy);
    font-weight: var(--font-semibold);
  }

  .btn--gold:hover {
    background: var(--color-gold-dark);
  }

  /* Author Card */
  .author-card {
    display: flex;
    gap: var(--space-3);
    padding: var(--space-3) 0;
    border-bottom: 1px solid var(--color-gray-100);
    transition: background var(--transition-fast);
  }

  .author-card:hover {
    background: var(--color-gray-50);
    margin: 0 calc(-1 * var(--space-3));
    padding-left: var(--space-3);
    padding-right: var(--space-3);
  }

  .author-card:last-child {
    border-bottom: none;
  }

  .author-card__image {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
  }

  .author-card__info {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .author-card__name {
    font-size: var(--text-base);
    color: var(--color-navy);
  }

  .author-card__credentials {
    font-size: var(--text-xs);
    color: var(--color-gold);
  }

  .author-card__articles {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
  }

  /* Bottom CTA */
  .bottom-cta {
    background: var(--color-white);
    padding: var(--space-16) 0;
    border-top: 1px solid var(--color-gray-200);
  }

  .bottom-cta__content {
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
  }

  .bottom-cta__content h2 {
    margin-bottom: var(--space-4);
  }

  .bottom-cta__content p {
    color: var(--color-gray-600);
    margin-bottom: var(--space-6);
  }

  .bottom-cta__buttons {
    display: flex;
    gap: var(--space-4);
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn--outline {
    background: transparent;
    border: 2px solid var(--color-navy);
    color: var(--color-navy);
  }

  .btn--outline:hover {
    background: var(--color-navy);
    color: var(--color-white);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .blog-layout {
      grid-template-columns: 1fr;
    }

    .blog-sidebar {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-4);
    }

    .sidebar-cta {
      grid-column: span 2;
    }
  }

  @media (max-width: 768px) {
    .blog-hero__title {
      font-size: var(--text-3xl);
    }

    .search-input-wrapper {
      flex-wrap: wrap;
    }

    .search-input {
      width: 100%;
      order: 1;
    }

    .search-icon {
      order: 0;
    }

    .search-btn {
      order: 2;
      width: 100%;
      margin-top: var(--space-2);
    }

    .quick-topics {
      display: none;
    }

    .author-filter {
      flex-direction: column;
      align-items: flex-start;
    }

    .author-filter__options {
      overflow-x: auto;
      width: 100%;
      padding-bottom: var(--space-2);
      flex-wrap: nowrap;
    }

    .posts-grid {
      grid-template-columns: 1fr;
    }

    .blog-sidebar {
      grid-template-columns: 1fr;
    }

    .sidebar-cta {
      grid-column: span 1;
    }

    .pagination__pages {
      display: none;
    }

    .bottom-cta__buttons {
      flex-direction: column;
    }
  }
</style>
